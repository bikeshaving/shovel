<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Shovel.js - The Portable Meta-Framework</title><style>.css-xlwoin{position:fixed;top:0;left:0;right:0;height:50px;background-color:var(--bg-color);border-bottom:1px solid var(--text-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 1rem;z-index:100;}.css-yq49om{font-size:1.5rem;font-weight:bold;color:var(--highlight-color);-webkit-text-decoration:none;text-decoration:none;}.css-1nfzlxo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:1.5rem;margin-left:auto;}.css-1nfzlxo a{color:var(--text-color);-webkit-text-decoration:none;text-decoration:none;}.css-1nfzlxo a:hover{color:var(--highlight-color);}.css-1nfzlxo a[aria-current=&quot;page&quot;]{color:var(--highlight-color);}.css-18jql2g{min-height:100vh;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;padding:60px 1rem 2rem;box-sizing:border-box;}.css-ymsqp7{color:var(--highlight-color);font-size:clamp(2.5rem, 8vw, 5rem);margin:0;}.css-camp0k{color:var(--text-muted);font-size:clamp(1rem, 2.5vw, 1.25rem);margin:0.5rem 0 2rem;}.css-rex6j6{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;width:100%;max-width:1100px;}@media (max-width: 900px){.css-rex6j6{grid-template-columns:1fr;max-width:600px;}}.css-11ck7kq{background:var(--code-bg);border-radius:8px;padding:1.25rem 1.5rem;text-align:left;}.css-11ck7kq pre{margin:0;font-family:&quot;SF Mono&quot;,Menlo,Monaco,&quot;Courier New&quot;,monospace;font-size:0.9rem;line-height:1.5;white-space:pre;overflow:hidden;}.css-11ck7kq code{font-family:inherit;}.css-ely75z{font-size:0.75rem;color:var(--text-muted);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em;}.css-evfb10{margin-top:2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:1rem;}.css-evfb10 a{display:inline-block;padding:0.6em 1.2em;border:1px solid var(--text-muted);color:var(--highlight-color);-webkit-text-decoration:none;text-decoration:none;font-size:0.95rem;border-radius:4px;}.css-evfb10 a:hover{background:var(--highlight-color);color:var(--bg-color);border-color:var(--highlight-color);}</style><link rel="stylesheet" type="text/css" href="/static/client-d338c3cf2d1d9d72.css"><meta name="description" content="The portable meta-framework built on web standards. Run Service Workers anywhere — Node, Bun, Cloudflare Workers."><meta property="og:title" content="Shovel.js - The Portable Meta-Framework"><meta property="og:description" content="The portable meta-framework built on web standards. Run Service Workers anywhere — Node, Bun, Cloudflare Workers."><meta property="og:type" content="website"><meta property="og:site_name" content="Shovel"></head><body><div id="navbar-root"><nav class="css-xlwoin"><a href="/" class="css-yq49om">Shovel</a><div class="css-1nfzlxo"><a href="/guides/getting-started">Guides</a><a href="/api">API</a><a href="/blog">Blog</a><a href="https://github.com/bikeshaving/shovel">GitHub</a></div></nav></div><div class="css-18jql2g"><h1 class="css-ymsqp7">Shovel.js</h1><p class="css-camp0k">The portable meta-framework built on web standards</p><div class="css-rex6j6"><div class="css-11ck7kq"><div class="css-ely75z">server.ts</div><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@b9g/router"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> logger <span class="token operator">=</span> self<span class="token punctuation">.</span>loggers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"app"</span><span class="token punctuation">,</span> <span class="token string">"cache"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"/kv/:key"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span>info<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">GET </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"kv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cached <span class="token operator">=</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> cached <span class="token operator">??</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span>info<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">PUT </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"kv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">await</span> req<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token number">201</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span>info<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">DELETE </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"kv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token operator">:</span> <span class="token number">204</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"fetch"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ev<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  ev<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><div class="css-11ck7kq"><div class="css-ely75z">terminal</div><pre><code>$ shovel develop server.ts
<span data-ts-offset="0"></span> INF shovel·build Building...
<span data-ts-offset="35"></span> INF shovel·build Build complete in 35ms
<span data-ts-offset="109"></span> INF shovel·build Watching 27 files in 9 directories
<span data-ts-offset="147"></span> INF shovel·platform Server ready
<span data-ts-offset="147"></span> INF shovel·develop http://localhost:7777

$ curl -X PUT :7777/kv/hello -d &quot;world&quot;
<span data-ts-offset="200"></span> INF app·cache PUT hello
# 201
$ curl :7777/kv/hello
<span data-ts-offset="250"></span> INF app·cache GET hello
world
$ curl -X DELETE :7777/kv/hello
<span data-ts-offset="300"></span> INF app·cache DELETE hello
# 204</code></pre></div></div><div class="css-evfb10"><a href="/guides/getting-started">Get Started</a><a href="https://github.com/bikeshaving/shovel">GitHub</a></div></div><script>
(function() {
  var now = new Date();
  var h = String(now.getHours()).padStart(2, "0");
  var m = String(now.getMinutes()).padStart(2, "0");
  var s = String(now.getSeconds()).padStart(2, "0");
  var ms = now.getMilliseconds();
  var spans = document.querySelectorAll("[data-ts-offset]");
  for (var i = 0; i < spans.length; i++) {
    var offset = parseInt(spans[i].getAttribute("data-ts-offset"), 10);
    var total = ms + offset;
    var extraS = Math.floor(total / 1000);
    var finalMs = String(total % 1000).padStart(3, "0");
    var finalS = parseInt(s, 10) + extraS;
    var finalM = parseInt(m, 10) + Math.floor(finalS / 60);
    finalS = String(finalS % 60).padStart(2, "0");
    finalM = String(finalM % 60).padStart(2, "0");
    spans[i].textContent = h + ":" + finalM + ":" + finalS + "." + finalMs;
  }
})();
</script></body></html>